# 安全政策

clawbot 项目非常重视安全性。我们致力于确保我们的软件对用户和社区都是安全的。本政策概述了我们的安全措施、报告流程和响应程序。

---

## 安全措施

### 1. 访问控制

- **用户白名单**：只有配置在 `TELEGRAM_ADMIN_IDS` 中的用户可以访问 Bot
- **权限分离**：不同功能需要不同的权限级别
- **默认安全设置**：如果未配置白名单，系统将禁止所有用户访问

### 2. 命令限制

**禁止的命令列表**（默认）：
- `rm -rf`：危险的文件删除命令
- `sudo`：提权命令
- `nc` 或 `ncat`：网络工具
- `shutdown`：系统关机命令
- `reboot`：系统重启命令

### 3. 安全沙盒

- **工作目录限制**：所有命令在 `~/clawbot_workspace/` 目录中执行
- **禁止访问的路径**：
  - `/System`：系统目录
  - `/Users/*/Library`：用户库目录
  - `/private`：私有目录
  - `/etc`：系统配置目录

### 4. 审计日志

- 所有操作都记录在 `logs/audit_YYYYMMDD.jsonl` 文件中
- 日志包含时间戳、用户ID、命令、执行结果等信息
- 日志保留 30 天（可通过配置修改）

### 5. 数据保护

- 所有配置信息都经过类型验证和安全处理
- 敏感信息（如 Bot Token）不会出现在日志中
- 文件传输过程中对数据进行完整性检查

---

## 安全漏洞报告

如果您发现任何安全漏洞，请立即向我们报告。我们将尽快调查并修复问题。

### 报告流程

1. **通过 GitHub Security Advisory 报告**：
   - 访问项目的 Security 标签页
   - 点击 "Report a vulnerability"
   - 详细描述漏洞和复现步骤
   - 提供受影响的版本信息

2. **通过电子邮件报告**（优先方式）：
   - 发送邮件到 [security@example.com](mailto:security@example.com)
   - 主题格式：`[Security] 漏洞描述`
   - 包含详细的漏洞信息和复现步骤

3. **通过 GitHub Issue 报告**：
   - 创建新 Issue
   - 使用 `[Security]` 标签
   - 提供足够的信息

### 报告内容应包括

- 漏洞的详细描述
- 复现步骤
- 受影响的版本
- 可能的攻击场景
- 建议的修复方法（如果有）

---

## 响应程序

### 1. 漏洞确认

- 收到报告后，我们将在 24 小时内确认收到
- 我们将对报告进行初步分析，以评估漏洞的严重性

### 2. 漏洞分类

我们使用以下分类系统：

#### 2.1 严重程度等级

- **Critical**：可远程利用的漏洞，可能导致系统完全妥协
- **High**：可远程利用的漏洞，可能导致数据泄露或系统损坏
- **Medium**：需要特定条件才能利用的漏洞，可能导致数据泄露
- **Low**：轻微漏洞，对系统造成的影响较小

#### 2.2 影响范围

- **代码执行**：可能导致任意代码执行
- **数据泄露**：可能导致敏感数据泄露
- **权限提升**：可能导致权限提升
- **拒绝服务**：可能导致系统崩溃或无法响应
- **其他**：其他类型的安全问题

### 3. 修复过程

- 根据漏洞的严重程度和复杂性，我们将制定修复计划
- 我们将在合理的时间内发布修复版本
- 我们将在修复版本发布后更新安全公告

### 4. 公告

- 我们将在修复版本发布后 5 个工作日内发布安全公告
- 公告将包括：
  - 漏洞描述
  - 受影响的版本
  - 修复方法
  - 缓解措施（如果有）

---

## 安全更新

### 1. 版本更新

我们建议用户定期更新到最新版本，以确保安全。

### 2. 安全通知

- 我们将在 GitHub Releases 中发布安全更新
- 我们将通过项目社交媒体渠道发布安全公告
- 我们将通过安全邮件列表发送通知（如有）

---

## 安全最佳实践

### 1. 部署安全

- 定期更新到最新版本
- 配置强密码和访问控制
- 使用防火墙限制网络访问
- 定期备份配置和数据

### 2. 使用安全

- 只允许信任的用户访问
- 定期检查用户白名单
- 谨慎执行未知来源的命令
- 定期检查审计日志

---

## 免责声明

我们已采取合理的措施来确保软件的安全性，但无法保证软件是完全无漏洞的。我们不对使用软件所造成的任何损害负责。

---


**最后更新日期：** 2024-02-21
